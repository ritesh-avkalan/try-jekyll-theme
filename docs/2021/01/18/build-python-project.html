<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name = "keywords" content = "fenics, topology optimization, isogeomtric analysis, hpc, phd blog, paraview, latex, computational mechanics, phd tools, parallel computation, python, phase field fracture, phase field topology optimization" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="How to start a new python project that you wish to support for long." />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Most of the times I have to modify my initial code base so as to use it in future work. This kind of approach is not good as it requires significant amount change in the initial code base. Also, any kind of improvements added to the modified code are not reflected in the base code. All in all this approach of always changing the source code is highly inefficient." />
<meta property="og:description" content="Most of the times I have to modify my initial code base so as to use it in future work. This kind of approach is not good as it requires significant amount change in the initial code base. Also, any kind of improvements added to the modified code are not reflected in the base code. All in all this approach of always changing the source code is highly inefficient." />
<link rel="canonical" href="/2021/01/18/build-python-project.html" />
<meta property="og:url" content="/2021/01/18/build-python-project.html" />
<meta property="og:site_name" content="Abhinav Gupta" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-01-18T00:00:00+05:30" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="How to start a new python project that you wish to support for long." />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-01-18T00:00:00+05:30","datePublished":"2021-01-18T00:00:00+05:30","description":"Most of the times I have to modify my initial code base so as to use it in future work. This kind of approach is not good as it requires significant amount change in the initial code base. Also, any kind of improvements added to the modified code are not reflected in the base code. All in all this approach of always changing the source code is highly inefficient.","headline":"How to start a new python project that you wish to support for long.","mainEntityOfPage":{"@type":"WebPage","@id":"/2021/01/18/build-python-project.html"},"url":"/2021/01/18/build-python-project.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/main.css" type="text/css" media="all" />




  <link rel="shortcut icon" type="image/x-icon" href="/?" />
    <title> 
     
      How to start a new python project that you wish to support for long. | 
    
    Abhinav Gupta
  </title>


  <!-- MailerLite Universal -->
  <script>
      (function(w,d,e,u,f,l,n){w[f]=w[f]||function(){(w[f].q=w[f].q||[])
      .push(arguments);},l=d.createElement(e),l.async=1,l.src=u,
      n=d.getElementsByTagName(e)[0],n.parentNode.insertBefore(l,n);})
      (window,document,'script','https://assets.mailerlite.com/js/universal.js','ml');
      ml('account', '325878');
  </script>
  <!-- End MailerLite Universal --><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Abhinav Gupta" /></head><body class="full_width_container"><div class="navbar-container">
    <div class="primary_container ">
        <a class="link home-icon" href="">
                <svg width="76px" height="100%" viewBox="0 0 63 40" >
                    <path d="M29.585,14.07l0.085,1.138l8.46,19.638l0.896,0.906c0.279,0.125 0.564,0.243 0.854,0.355c2.201,0.852 4.618,1.284 7.253,1.284c5.057,0 9.628,-1.101 13.717,-3.286l0.925,-1.544l0,-15.928l-1.75,-1.75l-11.924,0l-1.75,1.75l0,5.016l1.75,1.75l4.63,0c0,0 0,4.518 0,4.518c-0.594,0.254 -1.239,0.453 -1.934,0.6c-1.134,0.24 -2.34,0.358 -3.62,0.358c-1.348,0 -2.57,-0.236 -3.66,-0.726c-1.083,-0.487 -2.014,-1.154 -2.792,-2.005c-0.789,-0.862 -1.394,-1.888 -1.826,-3.07c-0.446,-1.225 -0.664,-2.566 -0.664,-4.021c0,-1.332 0.216,-2.577 0.656,-3.734c0.431,-1.132 1.037,-2.125 1.825,-2.974c0.777,-0.837 1.706,-1.49 2.786,-1.963c1.095,-0.48 2.321,-0.711 3.675,-0.711c1.37,0 2.671,0.226 3.901,0.683c1.182,0.438 2.192,1.054 3.02,1.859l2.463,-0.025l4.092,-4.136l-0.078,-2.536c-1.849,-1.651 -3.946,-2.797 -6.29,-3.44c-2.228,-0.612 -4.611,-0.921 -7.152,-0.921c-2.635,0 -5.052,0.432 -7.253,1.284c-2.243,0.867 -4.172,2.106 -5.792,3.71c-1.617,1.601 -2.887,3.534 -3.802,5.804c-0.275,0.683 -0.509,1.388 -0.701,2.117Z" style="fill-rule:nonzero;"/><path d="M16.141,3.21l-1.604,1.052l-13.552,31.152l1.604,2.448l6.204,0l1.628,-1.107l2.379,-6.021c-0,0 11.141,0 11.141,0c-0,0 2.46,6.038 2.46,6.038l1.62,1.09l6.336,0l1.608,-2.442l-13.42,-31.152l-1.608,-1.058l-4.796,0Zm4.507,19.272l-4.597,0c0,0 2.32,-6.017 2.32,-6.017l2.277,6.017Z" style="fill-rule:nonzero;"/>
                </svg>
        </a>
        <div class="navbar align_menu" style="font-family: Montserrat; font-weight:500">
            <a class="link" href="/pages/blog">Articles</a>
            <a class="link" href="/pages/projects">Projects</a>
            <a class="link nav_desktop" href="/pages/newsletters">Newsletter</a>
            <a class="link" href="/pages/about">About</a>
            <a href="/2021/01/18/build-python-project.html" id="theme-toggle" onclick="modeSwitcher()" style="cursor: pointer;">Dark</a>
        </div>
    </div>
</div><main aria-label="Content">
        <div>
            <div class="post_container">
    <div class="post_item_left" style=" padding-bottom:50px; ">
        <div class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

            <head>
                <title>How to start a new python project that you wish to support for long.</title>
                <script type="text/x-mathjax-config">
                    MathJax.Hub.Config({
                    extensions: ["tex2jax.js"],
                    jax: ["input/TeX", "output/HTML-CSS"],
                    tex2jax: {
                      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
                      processEscapes: true
                    },
                    "HTML-CSS": { availableFonts: ["TeX"] }
                  });
                </script>
                <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
            </head>
            <header class="post-header" style="margin-bottom: 60px;">
                <h1 style="font-weight:600; font-size: 46px; margin-top: 120px; " class="post-title p-name" itemprop="name headline">
                    How to start a new python project that you wish to support for long.
                </h1>
                <p class="post-meta" style="font-size: 16px;">
                    <time class="dt-published" datetime="2021-01-18T00:00:00+05:30" itemprop="datePublished">Jan 18, 2021
                    </time><span style="padding-left:10px;padding-right: 10px;">|</span><span class="post-meta"><a style="font-size:14px;color: var(--text-color);padding-right: 10px" href="/categories/coding">CODING, </a></span><span class="post-meta"><a style="font-size:14px;color: var(--text-color);" href="/categories/productivity">PRODUCTIVITY</a></span><!-- --------------------------------------- -->
                </p>
            </header>
            <hr style="/*position: relative; width: 300%;right:calc(200% - 30px);*/ background: var(--color-1);border: none;height: 1px; margin-bottom: 80px; opacity: 1;">
            <div class="post-content e-content enlarged-char" itemprop="articleBody">
                <p>Most of the times I have to modify my initial code base so as to use it in future work. This kind of approach is not good as it requires significant amount change in the initial code base. Also, any kind of improvements added to the modified code are not reflected in the base code. All in all this approach of always changing the source code is highly inefficient.</p>

<p>Instead, I should have, from day one, tried to make a single repository and should have modularized the code. Now I am trying to do that.</p>

<p>This requires following a directory structure that I have seen many times on GitHub. For the sake of this project I will base my directory structure on popular libraries that are based on FEniCS.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">.</span>
â”œâ”€â”€ _data
â”œâ”€â”€ _demo
â”œâ”€â”€ _doc
â”œâ”€â”€ _docker
â”œâ”€â”€ _flats
â”œâ”€â”€ _phase
â”œâ”€â”€ _scripts
â”œâ”€â”€ _test
â””â”€â”€ setup.py
</code></pre></div></div>

<p>An overview of what each of these does:</p>

<table>
  <thead>
    <tr>
      <th>File/Directory</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">_data</code></td>
      <td>This directory contains the data that will be used for test scripts. These will be mesh files created in gmsh</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">_demo</code></td>
      <td>This directory will contain the demos supplied with the package</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">_doc</code></td>
      <td>This directory will contain the documentation for the package. This will be automatically generated from python files</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">_docker</code></td>
      <td>This directory will contain the DockerFile to build the docker image for this project</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">_flats</code></td>
      <td>This directory will contain the flat programs based on which modules will be developed</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">_phase</code></td>
      <td>This is the main directory for the source code of the package</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">_scripts</code></td>
      <td>This directory will contain scripts to generate documentation</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">_test</code></td>
      <td>This directory will contain the unit tests</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">setup.py</code></td>
      <td>This file will help to install the package with <code class="language-plaintext highlighter-rouge">pip</code></td>
    </tr>
  </tbody>
</table>

<p>Once we have setup the repository in this fashion, I have to update the <code class="language-plaintext highlighter-rouge">setup.py</code> with the following code</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">codecs</span>
<span class="kn">import</span> <span class="n">os</span>

<span class="kn">from</span> <span class="n">setuptools</span> <span class="kn">import</span> <span class="n">find_packages</span><span class="p">,</span> <span class="n">setup</span>

<span class="c1"># https://packaging.python.org/single_source_version/
</span><span class="n">base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">abspath</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">))</span>
<span class="n">about</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="sh">"</span><span class="s">pacakage</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">__about__.py</span><span class="sh">"</span><span class="p">),</span> <span class="sh">"</span><span class="s">rb</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="nf">exec</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="nf">read</span><span class="p">(),</span> <span class="n">about</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="n">fname</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">codecs</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">fname</span><span class="p">),</span> <span class="n">encoding</span><span class="o">=</span><span class="sh">"</span><span class="s">utf-8</span><span class="sh">"</span><span class="p">).</span><span class="nf">read</span><span class="p">()</span>


<span class="nf">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">phase</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="n">about</span><span class="p">[</span><span class="sh">"</span><span class="s">__version__</span><span class="sh">"</span><span class="p">],</span>
    <span class="n">author</span><span class="o">=</span><span class="n">about</span><span class="p">[</span><span class="sh">"</span><span class="s">__author__</span><span class="sh">"</span><span class="p">],</span>
    <span class="n">author_email</span><span class="o">=</span><span class="n">about</span><span class="p">[</span><span class="sh">"</span><span class="s">__author_email__</span><span class="sh">"</span><span class="p">],</span>
    <span class="n">packages</span><span class="o">=</span><span class="nf">find_packages</span><span class="p">(),</span>
    <span class="n">description</span><span class="o">=</span><span class="sh">"</span><span class="s">...</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">long_description</span><span class="o">=</span><span class="nf">read</span><span class="p">(</span><span class="sh">"</span><span class="s">README.md</span><span class="sh">"</span><span class="p">),</span>
    <span class="n">long_description_content_type</span><span class="o">=</span><span class="sh">"</span><span class="s">text/markdown</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">url</span><span class="o">=</span><span class="sh">"</span><span class="s">https://github.com/iitrabhi/pacakage</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">license</span><span class="o">=</span><span class="n">about</span><span class="p">[</span><span class="sh">"</span><span class="s">__license__</span><span class="sh">"</span><span class="p">],</span>
    <span class="n">platforms</span><span class="o">=</span><span class="sh">"</span><span class="s">any</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span><span class="sh">"</span><span class="s">numpy</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">matplotlib</span><span class="sh">"</span><span class="p">],</span>
    <span class="n">python_requires</span><span class="o">=</span><span class="sh">"</span><span class="s">&gt;=3</span><span class="sh">"</span><span class="p">,</span>
    <span class="c1"># extras_require={
</span>    <span class="c1">#     "all": ["netCDF4", "h5py", "lxml"],
</span>    <span class="c1">#     "exodus": ["netCDF4"],
</span>    <span class="c1">#     "hdf5": ["h5py"],  # MED, MOAB, XDMF formats
</span>    <span class="c1">#     "xml": ["lxml"],  # Dolfin, VTU, XDMF, SVG
</span>    <span class="c1"># },
</span>    <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span>
        <span class="n">about</span><span class="p">[</span><span class="sh">"</span><span class="s">__status__</span><span class="sh">"</span><span class="p">],</span>
        <span class="n">about</span><span class="p">[</span><span class="sh">"</span><span class="s">__license__</span><span class="sh">"</span><span class="p">],</span>
        <span class="sh">"</span><span class="s">Intended Audience :: Science/Research</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">Operating System :: OS Independent</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">Programming Language :: Python</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">Programming Language :: Python :: 3</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">Topic :: Scientific/Engineering</span><span class="sh">"</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span><span class="sh">"</span><span class="s">console_scripts</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="sh">"</span><span class="s">phase = phase._cli:main</span><span class="sh">"</span><span class="p">]},</span>
<span class="p">)</span>
</code></pre></div></div>

<p>I donâ€™t know weather all of this is required but this works for now. This setup file will help us install the package with pip.</p>

<p>Now to develop this package we just need to go to the directory where we have <code class="language-plaintext highlighter-rouge">setup.py</code> and run the following command.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install</span> <span class="nt">-e</span> <span class="nb">.</span>
</code></pre></div></div>

<p>This will install the package in editable mode so that we can debug it while developing. Once the package is install we can do the following</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">package</span> <span class="kn">import</span> <span class="o">*</span>	
</code></pre></div></div>


            </div>
            <div class="PageNavigation">
                
                <a class="button button-prev" href="/2021/01/16/paraview-animation.html" title="How to export animation from paraview.">&laquo; Previous</a>
                
                
                <a class="button button-next" href="/2021/01/22/converting-serial-to-parallel.html" title="How to convert serial FEniCS code to parallel.">Next &raquo;</a>
                
            </div>
            <!-- ----------------------------------------------------------- -->
            <hr style="/*position: relative; width: 300%;right:calc(200% - 30px);*/ background: var(--color-1);border: none;height: 1px; margin-bottom: 80px; opacity: 1;">
            <div class="flexbox_container_two_col flexbox_container_flip " style="padding-top: 50px;padding-bottom: 50px;">
                <div class="flexbox_item">
                    <div>
                        <p style="font-size:36px; font-family: Montserrat; font-weight: bold; line-height: 1.2; ">Newsletter</p>
                        <p style="font-size:16px; padding-top: 20px; padding-bottom: 30px;">"<em><strong>Quality Research:</strong> A weekly newsletter covering ideas and tools for better academic research.</em>" </p>
                        <a class="ml-onclick-form button button-hello" href="javascript:void(0)" onclick="ml('show', 'uSsXyN', true)">Try the free newsletter</a>
                    </div>
                </div>
                <div class="flexbox_item">
                    <div class="abhi-icon" style="vertical-align: middle;     float: right;"><object data="/assets/svg/newsletter.svg" width="80%" style="pointer-events: none;"> </object></div>
                </div>
            </div>
            <!-- ----------------------------------------------------------- -->
        </div>
    </div>
    <div class="post_item_right hide_mobile">
        <p style="padding-top:200px; font-size: 14px; font-family: Montserrat;">ABOUT THE AUTHOR</p>
        <hr style="/*position: relative; width: 300%;right:calc(200% - 30px);*/ background: var(--color-1);border: none;height: 1px; margin-bottom: 40px;">
        <p style="margin-bottom:20px;font-size: 14px;">Hi, I am <strong>Abhinav Gupta</strong>. I am a researcher at Vanderbilt University, USA. I create content to help you become effective in producing quality research. If you are interested in research, academia, or computational mechanics, make sure to follow me. </p>
        <div style="margin-top:50px;">
            <ul class="social-media-list" style="font-size: 14px;">
                <li>
                    <a class="black-link" href="https://www.linkedin.com/in/abhiguptaio/" target="_blank" rel="noopener noreferrer">[LinkedIn]</a>
                </li>
                <li>
                    <a class="black-link" href="https://github.com/iitrabhi" target="_blank" rel="noopener noreferrer"> [Github]</a>
                </li>
                <li>
                    <a class="black-link" href="https://www.researchgate.net/profile/Abhinav_Gupta52" target="_blank" rel="noopener noreferrer">[RG]</a>
                </li>
                <li>
                    <p>ðŸ‘‹</p>
                </li>
            </ul>
        </div>
        <a class="hover_highlight" style="font-size: 14px;" href="/pages/about">Click here to learn more â†’</a>
        <p style="margin-bottom:50px"></p>
    </div>
</div>
        </div>
    </main>
<div style="min-height: 500px;background-color: #000; width:100%">
    <div class="primary_container">
        <div style="flex: 60%; ">
            <p style="font-family:Montserrat; color:#fff; font-weight:700; margin-top: 50px;">ABHI GUPTA</p>
        </div>
        <div class="hide_mobile" style="flex: 20%;">
            <p style="font-family:Montserrat; color:#888; font-weight:700; margin-top: 50px;">Categories</p>
             <p><a href="/categories/coding"  style="color:#ddd; font-size: 16px;">Coding</a></p>
            <p><a href="/categories/presentation"  style="color:#ddd;font-size: 16px;">Presentation</a></p>
            <p><a href="/categories/productivity"  style="color:#ddd;font-size: 16px;">Productivity</a></p>
        </div>
        <div style="flex: 20%; ">
            <p style="font-family:Montserrat; color:#888; font-weight:700; margin-top: 50px;">Links</p>
           
            <p><a href="https://twitter.com/abhiguptaio"  style="color:#ddd;font-size: 16px;">Twitter</a></p>
            <p><a href="https://www.youtube.com/channel/UCpj8oznjjLwVe5KHOGNrvnQ" style="color:#ddd;font-size: 16px;">YouTube</a></p>

             <p><a href="https://github.com/iitrabhi" style="color:#ddd;font-size: 16px;">GitHub</a></p>
             <p><a href="https://www.linkedin.com/in/abhiguptaio/"  style="color:#ddd;font-size: 16px;">LinkedIn</a></p>

            <p><a href="https://scholar.google.com/citations?user=UfWvIkEAAAAJ"  style="color:#ddd;font-size: 16px;">Google Scholar</a></p>
            <p><a href="https://www.researchgate.net/profile/Abhinav-Gupta-38"  style="color:#ddd;font-size: 16px;">Research Gate</a></p>
            
        </div>
    </div>
</div>
<script src="/assets/js/mode_switcher.js" type="text/javascript"></script>
    <script src="/assets/js/code_block.js" type="text/javascript"></script>
</body>

</html>